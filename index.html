<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•å¼ API å­¸ç¿’ç¶²ç«™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            border-color: #3b82f6; /* Blue border for active tab */
            color: #3b82f6;
            background-color: #eff6ff; /* Light blue background for active tab */
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .interactive-card {
            background-color: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s ease-in-out;
        }
        .interactive-card:hover {
            transform: translateY(-5px);
        }
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }
        .btn-primary:hover {
            background-color: #2563eb;
        }
        .btn-secondary {
            background-color: #6b7280;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #4b5563;
        }
         .btn-success {
            background-color: #10b981; /* Green */
            color: white;
        }
        .btn-success:hover {
            background-color: #059669;
        }
        .btn-warning {
            background-color: #f59e0b; /* Amber */
            color: white;
        }
        .btn-warning:hover {
            background-color: #d97706;
        }
        .btn-danger {
            background-color: #ef4444; /* Red */
            color: white;
        }
        .btn-danger:hover {
            background-color: #dc2626;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e5e7eb;
            border-radius: 9999px;
            height: 10px;
            margin-top: 10px;
            margin-bottom: 20px;
        }
        .progress-bar {
            background-color: #3b82f6;
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s ease-in-out;
        }
        .game-step {
            display: none;
        }
        .game-step.active {
            display: block;
        }
        /* Custom styles for better visual appeal */
        h1, h2, h3 {
            color: #1f2937; /* Darker text for headings */
        }
        p, label {
            color: #4b5563; /* Slightly lighter text for paragraphs */
            line-height: 1.6;
        }
        .icon-text {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .icon-text i {
            color: #3b82f6;
        }
        .code-block {
            background-color: #1f2937; /* Dark background for code */
            color: #d1d5db; /* Light text for code */
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        /* Tooltip styles */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }
        .tooltip-icon {
            cursor: help;
            color: #6b7280; /* Gray color for icon */
            margin-left: 4px;
        }
        .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: #374151; /* Darker gray for tooltip background */
            color: #fff;
            text-align: left;
            font-size: 0.8rem;
            line-height: 1.4;
            border-radius: 6px;
            padding: 8px 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%; /* Position above the icon */
            left: 50%;
            margin-left: -110px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip-text::after { /* Arrow */
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #374151 transparent transparent transparent;
        }
        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .quiz-question-container {
            /* Styles for individual question container if needed */
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="container mx-auto max-w-5xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800">ğŸš€ æ¢ç´¢ API çš„å¥‡å¦™ä¸–ç•Œ ğŸŒŒ</h1>
            <p class="text-lg text-gray-600 mt-2">ä¸€å€‹äº’å‹•å¼çš„å­¸ç¿’æ—…ç¨‹ï¼Œè®“ä½ è¼•é¬†æŒæ¡ API çš„æ ¸å¿ƒæ¦‚å¿µï¼</p>
        </header>

        <div class="mb-6 flex flex-wrap justify-center gap-2 md:gap-4 border-b border-gray-300 pb-2">
            <button class="tab-button active text-sm md:text-base font-semibold py-2 px-3 md:px-6 border-b-2 border-transparent hover:border-blue-500 hover:text-blue-500 rounded-t-lg" onclick="openTab(event, 'tab1')"><i class="fas fa-puzzle-piece mr-2"></i>ä»€éº¼æ˜¯ APIï¼Ÿ</button>
            <button class="tab-button text-sm md:text-base font-semibold py-2 px-3 md:px-6 border-b-2 border-transparent hover:border-blue-500 hover:text-blue-500 rounded-t-lg" onclick="openTab(event, 'tab2')"><i class="fas fa-sitemap mr-2"></i>API çš„ç¨®é¡èˆ‡ç”¨é€”</button>
            <button class="tab-button text-sm md:text-base font-semibold py-2 px-3 md:px-6 border-b-2 border-transparent hover:border-blue-500 hover:text-blue-500 rounded-t-lg" onclick="openTab(event, 'tab3')"><i class="fas fa-gamepad mr-2"></i>æ‰“é€ ä½ çš„ API (æ¨¡æ“¬)</button>
            <button class="tab-button text-sm md:text-base font-semibold py-2 px-3 md:px-6 border-b-2 border-transparent hover:border-blue-500 hover:text-blue-500 rounded-t-lg" onclick="openTab(event, 'tab4')"><i class="fas fa-chart-line mr-2"></i>API å•†æ¥­åƒ¹å€¼</button>
            <button class="tab-button text-sm md:text-base font-semibold py-2 px-3 md:px-6 border-b-2 border-transparent hover:border-blue-500 hover:text-blue-500 rounded-t-lg" onclick="openTab(event, 'tab5')"><i class="fas fa-star mr-2"></i>å„ªç§€ API çš„ç‰¹è³ª</button>
        </div>

        <div id="tab1" class="tab-content active">
            <div class="interactive-card">
                <h2 class="text-2xl font-bold mb-4">ğŸ¤” ä»€éº¼æ˜¯ APIï¼Ÿ</h2>
                <p class="mb-4">API (Application Programming Interface)ï¼Œä¸­æ–‡æ˜¯ã€Œæ‡‰ç”¨ç¨‹å¼ä»‹é¢ã€ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³åƒæˆé¤å»³è£¡çš„æœå‹™ç”Ÿï¼š</p>
                <div class="grid md:grid-cols-3 gap-4 text-center mb-6">
                    <div class="p-4 bg-blue-50 rounded-lg shadow">
                        <i class="fas fa-user fa-2x text-blue-500 mb-2"></i>
                        <h3 class="font-semibold">ä½  (é¡§å®¢)</h3>
                        <p class="text-sm">æƒ³è¦é»é¤</p>
                    </div>
                    <div class="p-4 bg-green-50 rounded-lg shadow">
                        <i class="fas fa-concierge-bell fa-2x text-green-500 mb-2"></i>
                        <h3 class="font-semibold">æœå‹™ç”Ÿ (API)</h3>
                        <p class="text-sm">å‚³é”ä½ çš„éœ€æ±‚çµ¦å»šæˆ¿</p>
                    </div>
                    <div class="p-4 bg-yellow-50 rounded-lg shadow">
                        <i class="fas fa-utensils fa-2x text-yellow-500 mb-2"></i>
                        <h3 class="font-semibold">å»šæˆ¿ (å¦ä¸€å¥—è»Ÿé«”)</h3>
                        <p class="text-sm">æ ¹æ“šéœ€æ±‚æº–å‚™é¤é»</p>
                    </div>
                </div>
                <p class="mb-4">ç°¡å–®ä¾†èªªï¼ŒAPI å°±æ˜¯ä¸€å¥—è¦å‰‡å’Œå”å®šï¼Œè®“ä¸åŒçš„è»Ÿé«”ç¨‹å¼å¯ä»¥äº’ç›¸æºé€šå’Œäº¤æ›è³‡æ–™ï¼Œè€Œä¸éœ€è¦çŸ¥é“å°æ–¹å…§éƒ¨çš„è¤‡é›œé‹ä½œç´°ç¯€ã€‚</p>
                <div class="mt-6 p-4 bg-indigo-50 rounded-lg">
                    <h3 class="text-xl font-semibold mb-2 icon-text"><i class="fas fa-key"></i>API çš„æ ¸å¿ƒåƒ¹å€¼ï¼š</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-700">
                        <li><strong class="text-indigo-600">äº’æ“ä½œæ€§ï¼š</strong> è®“ä¸åŒçš„ç³»çµ±å”åŒå·¥ä½œã€‚</li>
                        <li><strong class="text-indigo-600">æ•ˆç‡æå‡ï¼š</strong> é–‹ç™¼è€…ä¸éœ€é‡è¤‡é€ è¼ªå­ï¼Œå¯ä½¿ç”¨ç¾æˆåŠŸèƒ½ã€‚</li>
                        <li><strong class="text-indigo-600">å‰µæ–°åŠ é€Ÿï¼š</strong> å¿«é€Ÿæ•´åˆä¸åŒæœå‹™ï¼Œæ‰“é€ æ–°æ‡‰ç”¨ã€‚</li>
                        <li><strong class="text-indigo-600">ç”Ÿæ…‹ç³»å»ºç«‹ï¼š</strong> è®“å…¶ä»–é–‹ç™¼è€…åŸºæ–¼ä½ çš„å¹³å°é–‹ç™¼æ–°æœå‹™ã€‚</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="tab2" class="tab-content">
            <div class="interactive-card">
                <h2 class="text-2xl font-bold mb-4">ğŸ› ï¸ API çš„ç¨®é¡èˆ‡ç”¨é€”</h2>
                <p class="mb-4">API æœ‰å¾ˆå¤šç¨®ï¼Œä½†æœ€å¸¸è¦‹çš„æ˜¯ Web APIï¼Œå®ƒå€‘é€éç¶²éš›ç¶²è·¯é‹ä½œã€‚å®ƒå€‘è¢«å»£æ³›æ‡‰ç”¨åœ¨å„ç¨®å ´æ™¯ï¼š</p>
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="p-4 bg-gray-50 rounded-lg shadow hover:shadow-lg transition-shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fas fa-cloud-sun"></i>å¤©æ°£é å ± API</h3>
                        <p class="text-sm">è®“ä½ çš„ App æˆ–ç¶²ç«™èƒ½é¡¯ç¤ºå³æ™‚å¤©æ°£è³‡è¨Šã€‚</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg shadow hover:shadow-lg transition-shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fas fa-map-marked-alt"></i>åœ°åœ–æœå‹™ API</h3>
                        <p class="text-sm">åœ¨æ‡‰ç”¨ä¸­åµŒå…¥åœ°åœ–ã€è¦åŠƒè·¯ç·šç­‰ (å¦‚ Google Maps API)ã€‚</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg shadow hover:shadow-lg transition-shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fab fa-facebook"></i>ç¤¾ç¾¤ç™»å…¥ API</h3>
                        <p class="text-sm">å…è¨±ä½¿ç”¨è€…ç”¨ Facebook, Google å¸³è™Ÿå¿«é€Ÿç™»å…¥ä½ çš„æœå‹™ã€‚</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg shadow hover:shadow-lg transition-shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fas fa-credit-card"></i>æ”¯ä»˜è™•ç† API</h3>
                        <p class="text-sm">è®“ä½ çš„ç¶²ç«™èƒ½å®‰å…¨åœ°è™•ç†ç·šä¸Šä»˜æ¬¾ (å¦‚ Stripe API)ã€‚</p>
                    </div>
                </div>
                <div id="apiQuizContainer" class="mt-6 p-4 bg-teal-50 rounded-lg">
                    <h3 class="text-xl font-semibold mb-2">å°æ¸¬é©—ï¼šAPI é…å°ï¼ <span id="quizProgress" class="text-sm font-normal"></span></h3>
                    <div id="quizQuestionArea" class="quiz-question-container">
                        </div>
                    <p id="quizResult" class="mt-3 font-semibold"></p>
                    <button id="nextQuizQuestionBtn" class="btn btn-primary mt-3" onclick="nextQuizQuestion()" style="display:none;"><i class="fas fa-arrow-right mr-1"></i>ä¸‹ä¸€é¡Œ</button>
                    <button id="restartQuizBtn" class="btn btn-secondary mt-3" onclick="restartQuiz()" style="display:none;"><i class="fas fa-redo mr-1"></i>é‡æ–°é–‹å§‹æ¸¬é©—</button>
                </div>
            </div>
        </div>

        <div id="tab3" class="tab-content">
            <div class="interactive-card">
                <h2 class="text-2xl font-bold mb-4">ğŸ® æ‰“é€ ä½ çš„ç¬¬ä¸€å€‹ API (æ¨¡æ“¬éŠæˆ²)</h2>
                <p class="mb-4">æº–å‚™å¥½äº†å—ï¼Ÿè®“æˆ‘å€‘ä¸€æ­¥æ­¥æ¨¡æ“¬è¨­è¨ˆä¸€å€‹ç°¡å–®çš„ã€Œæ¯æ—¥ç¬‘è©±ã€APIï¼é€™æ¬¡æˆ‘å€‘å°‡æ¢ç´¢æ›´å¤šæ“ä½œï¼</p>
                
                <div class="progress-bar-container">
                    <div id="apiGameProgressBar" class="progress-bar" style="width: 0%;"></div>
                </div>

                <div id="apiGame">
                    <div class="game-step active" data-step="1">
                        <h3 class="text-xl font-semibold mb-3">æ­¥é©Ÿ 1: API çš„ä½¿å‘½å®£è¨€ï¼</h3>
                        <p class="mb-2">ä½ çš„ã€Œæ¯æ—¥ç¬‘è©± APIã€ä¸»è¦ç›®çš„æ˜¯ä»€éº¼ï¼Ÿ</p>
                        <select id="apiPurpose" class="w-full p-2 border border-gray-300 rounded-md mb-4">
                            <option value="entertainment">ç‚ºä½¿ç”¨è€…æä¾›æ¯æ—¥è¼•é¬†ä¸€ç¬‘</option>
                            <option value="dev_tool">ä½œç‚ºé–‹ç™¼è€…ç·´ç¿’ä¸²æ¥ API çš„å·¥å…·</option>
                            <option value="content_source">ç‚ºå…¶ä»–æ‡‰ç”¨ç¨‹å¼æä¾›ç¬‘è©±å…§å®¹</option>
                        </select>
                        <button class="btn btn-primary" onclick="nextStep(1)">ä¸‹ä¸€æ­¥ <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>

                    <div class="game-step" data-step="2">
                        <h3 class="text-xl font-semibold mb-3">æ­¥é©Ÿ 2: è³‡æºå‘½å</h3>
                        <p class="mb-2">ä½ çš„ API ä¸»è¦æ“ä½œçš„è³‡æºæ˜¯ä»€éº¼ï¼Ÿ(ä¾‹å¦‚ï¼šç¬‘è©±ã€ä½¿ç”¨è€…ã€ç”¢å“)ã€‚è«‹ç”¨è‹±æ–‡å°å¯«è¤‡æ•¸å‘½åã€‚</p>
                        <input type="text" id="apiResourceName" value="jokes" class="w-full p-2 border border-gray-300 rounded-md mb-4">
                        <p class="text-sm text-gray-600 mb-2">é€™å°‡æ§‹æˆä½  Endpoint çš„åŸºç¤ï¼Œä¾‹å¦‚ <code>/jokes</code>ã€‚</p>
                        <button class="btn btn-secondary mr-2" onclick="prevStep(2)"><i class="fas fa-arrow-left mr-1"></i>ä¸Šä¸€æ­¥</button>
                        <button class="btn btn-primary" onclick="nextStep(2)">ä¸‹ä¸€æ­¥ <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>
                    
                    <div class="game-step" data-step="3">
                        <h3 class="text-xl font-semibold mb-3">æ­¥é©Ÿ 3: é¸æ“‡ã€Œå‹•ä½œã€(HTTP Method)</h3>
                        <p class="mb-2">HTTP Method å‘Šè¨´ä¼ºæœå™¨ä½ æƒ³è¦å°è³‡æºåšä»€éº¼æ“ä½œï¼š</p>
                        <select id="httpMethod" class="w-full p-2 border border-gray-300 rounded-md mb-4" onchange="updateMethodSpecificUI()">
                            <option value="GET">GET (è®€å–è³‡æ–™)</option>
                            <option value="POST">POST (æ–°å¢è³‡æ–™)</option>
                            <option value="PUT">PUT (æ›´æ–°è³‡æ–™)</option>
                            <option value="DELETE">DELETE (åˆªé™¤è³‡æ–™)</option>
                        </select>
                        <div id="methodSpecificInputs" class="mt-3">
                            </div>
                        <button class="btn btn-secondary mr-2" onclick="prevStep(3)"><i class="fas fa-arrow-left mr-1"></i>ä¸Šä¸€æ­¥</button>
                        <button class="btn btn-primary" onclick="nextStep(3)">ä¸‹ä¸€æ­¥ <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>

                    <div class="game-step" data-step="4">
                        <h3 class="text-xl font-semibold mb-3">æ­¥é©Ÿ 4: å®šç¾©è³‡æ–™çµæ§‹</h3>
                        <p class="mb-2" id="dataStructureInstruction">ä½ çš„ API åœ¨å›æ‡‰æˆ–è«‹æ±‚ä¸­ï¼Œç¬‘è©±è³‡æ–™åŒ…å«å“ªäº›æ¬„ä½ï¼Ÿ</p>
                        <div class="space-y-2 mb-4">
                            <div><input type="checkbox" id="dataJokeText" value="text" class="mr-2" checked> <label for="dataJokeText">ç¬‘è©±å…§å®¹ (text)</label></div>
                            <div><input type="checkbox" id="dataJokeId" value="id" class="mr-2" checked> <label for="dataJokeId">ç¬‘è©± ID (id)</label></div>
                            <div><input type="checkbox" id="dataJokeCategory" value="category" class="mr-2"> <label for="dataJokeCategory">ç¬‘è©±åˆ†é¡ (category)</label></div>
                        </div>
                         <div id="requestBodyInputContainer" class="mt-4" style="display:none;">
                            <label for="requestBody" class="block mb-1 font-medium">
                                è«‹æ±‚å…§å®¹ (Request Body - JSON æ ¼å¼)
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle tooltip-icon"></i>
                                    <span class="tooltip-text">
                                        åœ¨é€™è£¡è¼¸å…¥æ‚¨æƒ³é€é API å‚³é€çš„è³‡æ–™ï¼Œä¾‹å¦‚æ–°å¢æˆ–æ›´æ–°ç¬‘è©±æ™‚çš„å…§å®¹ã€‚
                                        è«‹ç¢ºä¿æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼ï¼Œä¾‹å¦‚ï¼š<br>
                                        <code>{ "text": "é€™æ˜¯ä¸€å€‹æ–°ç¬‘è©±", "category": "å†·ç¬‘è©±" }</code><br>
                                        å°æ–¼ POSTï¼Œé€šå¸¸ä¸åŒ…å« "id" æ¬„ä½ï¼Œç³»çµ±æœƒè‡ªå‹•ç”¢ç”Ÿã€‚
                                        å°æ–¼ PUTï¼Œé€šå¸¸æœƒåŒ…å«æ‰€æœ‰æ‚¨æƒ³æ›´æ–°çš„æ¬„ä½ã€‚
                                    </span>
                                </span>
                            </label>
                            <textarea id="requestBody" rows="4" class="w-full p-2 border border-gray-300 rounded-md" placeholder='{ "text": "æ–°ç¬‘è©±...", "category": "æ–°åˆ†é¡" }'></textarea>
                        </div>
                        <button class="btn btn-secondary mr-2" onclick="prevStep(4)"><i class="fas fa-arrow-left mr-1"></i>ä¸Šä¸€æ­¥</button>
                        <button class="btn btn-primary" onclick="nextStep(4)">ä¸‹ä¸€æ­¥ <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>
                    
                    <div class="game-step" data-step="5">
                        <h3 class="text-xl font-semibold mb-3">æ­¥é©Ÿ 5: Endpoint èˆ‡æ¨¡æ“¬å›æ‡‰/è«‹æ±‚</h3>
                        <p class="mb-2">æ ¹æ“šä½ çš„é¸æ“‡ï¼Œä½ çš„ API Endpoint å’Œç¯„ä¾‹è«‹æ±‚/å›æ‡‰å¦‚ä¸‹ï¼š</p>
                        <div class="bg-gray-100 p-3 rounded-md mb-2">
                            <strong>Endpoint:</strong> <code id="apiEndpointPreview" class="text-purple-700"></code>
                        </div>
                        <div id="apiRequestPreviewContainer" class="mb-4" style="display:none;">
                             <h4 class="font-semibold mb-1">æ¨¡æ“¬è«‹æ±‚ (Request Body):</h4>
                             <pre id="apiRequestPreview" class="code-block"></pre>
                        </div>
                        <h4 class="font-semibold mb-1">æ¨¡æ“¬å›æ‡‰ (Response):</h4>
                        <pre id="apiResponsePreview" class="code-block"></pre>
                        <p class="text-sm text-gray-600 mt-2 mb-4">é€™æ˜¯ä¸€å€‹æ¨¡æ“¬ï¼Œå¯¦éš› API æœƒèˆ‡è³‡æ–™åº«äº’å‹•ï¼</p>
                        <button class="btn btn-secondary mr-2" onclick="prevStep(5)"><i class="fas fa-arrow-left mr-1"></i>ä¸Šä¸€æ­¥</button>
                        <button class="btn btn-primary" onclick="finishGame()">å®Œæˆ API è¨­è¨ˆï¼ <i class="fas fa-check ml-1"></i></button>
                    </div>

                    <div class="game-step" data-step="6">
                        <h3 class="text-xl font-semibold mb-3 text-green-600"><i class="fas fa-trophy mr-2"></i>æ­å–œï¼ä½ å·²å®Œæˆ API è¨­è¨ˆæ¨¡æ“¬ï¼</h3>
                        <p class="mb-2">ä½ è¨­è¨ˆçš„ã€Œ<span id="finalResourceName"></span> APIã€æ¦‚è¦ï¼š</p>
                        <div id="apiSummary" class="p-4 bg-green-50 rounded-lg border border-green-200 space-y-2">
                            <p><strong>ç›®çš„:</strong> <span id="summaryPurpose"></span></p>
                            <p><strong>è³‡æºåç¨±:</strong> <span id="summaryResourceName" class="font-mono"></span></p>
                            <p><strong>æ“ä½œ (HTTP Method):</strong> <span id="summaryMethod" class="font-semibold"></span></p>
                            <p><strong>Endpoint:</strong> <code id="summaryEndpoint" class="text-purple-700"></code></p>
                            <div id="summaryRequestContainer" style="display:none;">
                                <p><strong>æ¨¡æ“¬è«‹æ±‚ Body:</strong></p>
                                <pre id="summaryRequest" class="code-block"></pre>
                            </div>
                            <p><strong>æ¨¡æ“¬å›æ‡‰:</strong></p>
                            <pre id="summaryResponse" class="code-block"></pre>
                        </div>
                        <p class="mt-4 text-gray-700">é€™åªæ˜¯ä¸€å€‹ç°¡åŒ–çš„æ¨¡æ“¬ï¼ŒçœŸå¯¦çš„ API è¨­è¨ˆæœƒæ¶‰åŠæ›´å¤šç´°ç¯€ï¼Œä¾‹å¦‚éŒ¯èª¤è™•ç†ã€å®‰å…¨æ€§ã€ç‰ˆæœ¬æ§åˆ¶ç­‰ç­‰ã€‚ä½†ä½ å·²ç¶“æŒæ¡äº†æ ¸å¿ƒæ¦‚å¿µï¼</p>
                        <button class="btn btn-primary mt-4" onclick="restartGame()"><i class="fas fa-redo mr-1"></i>é‡æ–°é–‹å§‹æ¨¡æ“¬</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab4" class="tab-content">
             <div class="interactive-card">
                <h2 class="text-2xl font-bold mb-4">ğŸ“ˆ API çš„å•†æ¥­åƒ¹å€¼</h2>
                <p class="mb-4">API ä¸åƒ…æ˜¯æŠ€è¡“å·¥å…·ï¼Œæ›´æ˜¯é©…å‹•å•†æ¥­æˆé•·å’Œå‰µæ–°çš„é‡è¦å¼•æ“ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è¦‹çš„ API å•†æ¥­æ¨¡å¼ï¼š</p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="p-4 bg-blue-50 rounded-lg shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fas fa-dollar-sign"></i>ç›´æ¥ç‡Ÿåˆ©</h3>
                        <p class="text-sm">é€éè¨‚é–±è²»ã€ç”¨é‡è¨ˆè²»æˆ–åˆ©æ½¤åˆ†æˆä¾†ç”¢ç”Ÿæ”¶å…¥ã€‚ (ä¾‹å¦‚ï¼šAWS API)</p>
                    </div>
                    <div class="p-4 bg-green-50 rounded-lg shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fas fa-cogs"></i>æ”¯æ´æ ¸å¿ƒç”¢å“</h3>
                        <p class="text-sm">API ä½œç‚ºæ ¸å¿ƒç”¢å“çš„å»¶ä¼¸ï¼Œå¢å¼·å…¶åŠŸèƒ½æˆ–æ•´åˆæ€§ã€‚ (ä¾‹å¦‚ï¼šShopify API è®“å•†å®¶æ•´åˆå…¶ä»–æœå‹™)</p>
                    </div>
                    <div class="p-4 bg-yellow-50 rounded-lg shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fas fa-users"></i>å»ºç«‹ç”Ÿæ…‹ç³»</h3>
                        <p class="text-sm">é¼“å‹µç¬¬ä¸‰æ–¹é–‹ç™¼è€…åŸºæ–¼ä½ çš„å¹³å°æ‰“é€ æ‡‰ç”¨ï¼Œæ“´å¤§å½±éŸ¿åŠ›ã€‚ (ä¾‹å¦‚ï¼šSlack API, Facebook API)</p>
                    </div>
                    <div class="p-4 bg-purple-50 rounded-lg shadow">
                        <h3 class="font-semibold text-lg mb-2 icon-text"><i class="fas fa-store"></i>API å³ç”¢å“</h3>
                        <p class="text-sm">API æœ¬èº«å°±æ˜¯å…¬å¸çš„ä¸»è¦ç”¢å“ã€‚ (ä¾‹å¦‚ï¼šStripe æ”¯ä»˜ API, Twilio é€šè¨Š API)</p>
                    </div>
                </div>
                <p class="mt-6 text-gray-700">æˆåŠŸçš„ API ç­–ç•¥éœ€è¦èˆ‡å…¬å¸çš„æ ¸å¿ƒæ¥­å‹™ç›®æ¨™ç·Šå¯†çµåˆã€‚</p>
            </div>
        </div>

        <div id="tab5" class="tab-content">
            <div class="interactive-card">
                <h2 class="text-2xl font-bold mb-4">ğŸŒŸ å„ªç§€ API çš„ç‰¹è³ª</h2>
                <p class="mb-4">ä¸€å€‹ã€Œå¥½ã€çš„ API èƒ½è®“é–‹ç™¼è€…è¼•é¬†æ„‰å¿«åœ°ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é—œéµç‰¹è³ªï¼š</p>
                <ul class="space-y-3">
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-glasses text-xl"></i><strong class="text-gray-700">æ¸…æ™°æ€§ (Clarity):</strong> ç›®çš„æ˜ç¢ºï¼Œè¨­è¨ˆç›´è§€ï¼Œæ˜“æ–¼ç†è§£ã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-drafting-compass text-xl"></i><strong class="text-gray-700">éˆæ´»æ€§ (Flexibility):</strong> èƒ½é©æ‡‰ä¸åŒçš„ä½¿ç”¨æ¡ˆä¾‹ã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-bolt text-xl"></i><strong class="text-gray-700">å¼·å¤§æ€§ (Power):</strong> æä¾›çš„è§£æ±ºæ–¹æ¡ˆå®Œæ•´æœ‰æ•ˆã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-magic text-xl"></i><strong class="text-gray-700">æ˜“ä¸Šæ‰‹æ€§ (Hackability):</strong> é–‹ç™¼è€…èƒ½å¿«é€Ÿä¸Šæ‰‹ä¸¦é€éå¯¦é©—å­¸ç¿’ã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-book-open text-xl"></i><strong class="text-gray-700">å„ªè³ªæ–‡ä»¶ (Documentation):</strong> æ¸…æ™°ã€å®Œæ•´ã€æ˜“æ–¼æŸ¥æ‰¾çš„æ–‡ä»¶å’Œç¯„ä¾‹ã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-cogs text-xl"></i><strong class="text-gray-700">å¯ç”¨æ€§ (Usability):</strong> API å®¹æ˜“è¢«æ•´åˆå’Œä½¿ç”¨ã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-tachometer-alt text-xl"></i><strong class="text-gray-700">æ€§èƒ½ (Performance):</strong> å¿«é€Ÿä¸”å¯é çš„å›æ‡‰ã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-shield-alt text-xl"></i><strong class="text-gray-700">å®‰å…¨æ€§ (Security):</strong> ä¿è­·è³‡æ–™å’Œç³»çµ±å®‰å…¨ã€‚</li>
                    <li class="p-3 bg-gray-50 rounded-lg shadow-sm icon-text"><i class="fas fa-history text-xl"></i><strong class="text-gray-700">å‘å¾Œå…¼å®¹æ€§ (Backward Compatibility):</strong> API æ›´æ–°æ™‚ç›¡é‡ä¸ç ´å£ç¾æœ‰æ•´åˆã€‚</li>
                </ul>
                <p class="mt-6 text-gray-700">æ‰“é€ ä¸€å€‹å„ªç§€çš„ API éœ€è¦åœ¨é€™äº›ç‰¹è³ªé–“æ‰¾åˆ°å¹³è¡¡ï¼Œä¸¦æŒçºŒé—œæ³¨é–‹ç™¼è€…çš„éœ€æ±‚ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // Tab switching logic
        function openTab(event, tabId) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tc => tc.classList.remove('active'));
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // Quiz logic for Tab 2
        const quizQuestions = [
            {
                question: "å¦‚æœæˆ‘æƒ³åœ¨æˆ‘çš„æ—…éŠéƒ¨è½æ ¼ä¸­åŠ å…¥ä¸€å€‹åŠŸèƒ½ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥æŸ¥è©¢ç‰¹å®šåŸå¸‚çš„ç›®å‰æ°£æº«ï¼Œæˆ‘æœ€å¯èƒ½éœ€è¦å“ªç¨® APIï¼Ÿ",
                options: ["æ”¯ä»˜è™•ç† API", "å¤©æ°£é å ± API", "ç¤¾ç¾¤ç™»å…¥ API"],
                correctAnswer: "å¤©æ°£é å ± API",
                feedback: "å¤©æ°£é å ± API æä¾›å³æ™‚å¤©æ°£è³‡è¨Šã€‚"
            },
            {
                question: "æˆ‘æ­£åœ¨é–‹ç™¼ä¸€å€‹é›»å•†ç¶²ç«™ï¼Œéœ€è¦è®“é¡§å®¢èƒ½å¤ å®‰å…¨åœ°è¼¸å…¥ä¿¡ç”¨å¡è³‡è¨Šå®Œæˆè³¼è²·ï¼Œæˆ‘æ‡‰è©²æ•´åˆå“ªç¨®é¡å‹çš„ APIï¼Ÿ",
                options: ["åœ°åœ–æœå‹™ API", "ç¿»è­¯ API", "æ”¯ä»˜è™•ç† API"],
                correctAnswer: "æ”¯ä»˜è™•ç† API",
                feedback: "æ”¯ä»˜è™•ç† API å°ˆé–€è™•ç†ç·šä¸Šäº¤æ˜“å’Œä»˜æ¬¾å®‰å…¨ã€‚"
            },
            {
                question: "æˆ‘çš„æ‡‰ç”¨ç¨‹å¼éœ€è¦å…è¨±ä½¿ç”¨è€…ä½¿ç”¨ä»–å€‘çš„ Google å¸³è™Ÿå¿«é€Ÿè¨»å†Šå’Œç™»å…¥ï¼Œé€™æ™‚æˆ‘æœƒç”¨åˆ°ä»€éº¼ APIï¼Ÿ",
                options: ["ç¤¾ç¾¤ç™»å…¥ API (ä¾‹å¦‚ OAuth 2.0)", "æª”æ¡ˆå„²å­˜ API", "å½±ç‰‡ä¸²æµ API"],
                correctAnswer: "ç¤¾ç¾¤ç™»å…¥ API (ä¾‹å¦‚ OAuth 2.0)",
                feedback: "ç¤¾ç¾¤ç™»å…¥ API (å¦‚ Google Sign-In) æä¾›äº†èº«ä»½é©—è­‰åŠŸèƒ½ã€‚"
            },
            {
                question: "æˆ‘å¸Œæœ›æˆ‘çš„æ‡‰ç”¨ç¨‹å¼èƒ½å¤ åœ¨åœ°åœ–ä¸Šé¡¯ç¤ºé™„è¿‘çš„é¤å»³ï¼Œä¸¦æä¾›å°èˆªåŠŸèƒ½ï¼Œæˆ‘éœ€è¦å“ªç¨® APIï¼Ÿ",
                options: ["è‚¡ç¥¨å¸‚å ´ API", "åœ°åœ–æœå‹™ API", "éŸ³æ¨‚è­˜åˆ¥ API"],
                correctAnswer: "åœ°åœ–æœå‹™ API",
                feedback: "åœ°åœ–æœå‹™ API (å¦‚ Google Maps API) æä¾›åœ°ç†ä½ç½®ã€åœ°é»æœç´¢å’Œå°èˆªåŠŸèƒ½ã€‚"
            }
        ];

        let currentQuizQuestionIndex = 0;
        let quizScore = 0;
        const quizQuestionArea = document.getElementById('quizQuestionArea');
        const quizResultEl = document.getElementById('quizResult');
        const nextQuizQuestionBtn = document.getElementById('nextQuizQuestionBtn');
        const restartQuizBtn = document.getElementById('restartQuizBtn');
        const quizProgressEl = document.getElementById('quizProgress');


        function loadQuizQuestion(index) {
            quizQuestionArea.innerHTML = ''; // Clear previous question
            quizResultEl.textContent = '';
            nextQuizQuestionBtn.style.display = 'none';
            restartQuizBtn.style.display = 'none';
            quizProgressEl.textContent = `(ç¬¬ ${index + 1} / ${quizQuestions.length} é¡Œ)`;


            if (index >= quizQuestions.length) {
                // End of quiz
                quizQuestionArea.innerHTML = `<p class="font-semibold text-lg">æ¸¬é©—å®Œæˆï¼</p><p>ä½ ç­”å°äº† ${quizScore} / ${quizQuestions.length} é¡Œã€‚</p>`;
                quizProgressEl.textContent = "";
                restartQuizBtn.style.display = 'inline-flex';
                return;
            }

            const q = quizQuestions[index];
            const questionText = document.createElement('p');
            questionText.className = 'mb-3';
            questionText.textContent = q.question;
            quizQuestionArea.appendChild(questionText);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'space-y-2';
            q.options.forEach(optionText => {
                const button = document.createElement('button');
                button.className = 'w-full text-left p-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-100';
                button.textContent = optionText;
                button.onclick = () => checkQuizAnswer(optionText === q.correctAnswer, button, q.correctAnswer, q.feedback);
                optionsDiv.appendChild(button);
            });
            quizQuestionArea.appendChild(optionsDiv);
        }

        function checkQuizAnswer(isCorrect, buttonElement, correctAnswerText, feedbackText) {
            const quizButtons = quizQuestionArea.querySelectorAll('button');
            quizButtons.forEach(btn => {
                btn.disabled = true;
                btn.classList.remove('bg-green-200', 'bg-red-200', 'border-green-500', 'border-red-500', 'bg-green-100', 'border-green-400');
                 if (btn.textContent === correctAnswerText) {
                    btn.classList.add('bg-green-100', 'border-green-400'); // Highlight correct answer subtly
                }
            });

            if (isCorrect) {
                quizScore++;
                quizResultEl.textContent = `ğŸ‰ ç­”å°äº†ï¼ ${feedbackText}`;
                quizResultEl.className = 'mt-3 font-semibold text-green-600';
                buttonElement.classList.add('bg-green-200', 'border-green-500');
            } else {
                quizResultEl.textContent = `ğŸ¤” ç­”éŒ¯äº†ã€‚æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${correctAnswerText}ã€‚ ${feedbackText}`;
                quizResultEl.className = 'mt-3 font-semibold text-red-600';
                buttonElement.classList.add('bg-red-200', 'border-red-500');
            }
            
            if (currentQuizQuestionIndex < quizQuestions.length -1) {
                nextQuizQuestionBtn.style.display = 'inline-flex';
            } else {
                // Last question answered, show restart button directly or after a summary
                nextQuizQuestionBtn.style.display = 'none'; // Hide next if it's the last question
                // Display final score immediately or trigger end of quiz display
                setTimeout(() => { // Slight delay to show feedback before final summary
                    loadQuizQuestion(quizQuestions.length); // This will trigger the end of quiz display
                }, 1500);
            }
        }
        
        function nextQuizQuestion() {
            currentQuizQuestionIndex++;
            loadQuizQuestion(currentQuizQuestionIndex);
        }

        function restartQuiz() {
            currentQuizQuestionIndex = 0;
            quizScore = 0;
            loadQuizQuestion(currentQuizQuestionIndex);
            restartQuizBtn.style.display = 'none';
        }


        // API Game Logic for Tab 3
        let currentStep = 1;
        const totalSteps = 6; // Including the finish step
        const gameSteps = document.querySelectorAll('#apiGame .game-step');
        const progressBar = document.getElementById('apiGameProgressBar');
        const apiData = {
            resourceId: '123' // Default ID for PUT/DELETE examples
        }; 

        function updateProgressBar() {
            const progress = ((currentStep -1) / (totalSteps -1)) * 100;
            progressBar.style.width = progress + '%';
        }

        function showStep(stepNumber) {
            gameSteps.forEach(step => step.classList.remove('active'));
            const currentStepElement = document.querySelector(`#apiGame .game-step[data-step="${stepNumber}"]`);
            if (currentStepElement) {
                currentStepElement.classList.add('active');
            }
            currentStep = stepNumber;
            updateProgressBar();
            // Special UI updates based on step
            if (stepNumber === 4) { // Data Structure step
                const method = apiData.method || 'GET';
                const instructionEl = document.getElementById('dataStructureInstruction');
                const requestBodyContainer = document.getElementById('requestBodyInputContainer');
                if (method === 'POST' || method === 'PUT') {
                    instructionEl.textContent = 'å®šç¾©è«‹æ±‚ Body ä¸­ç¬‘è©±è³‡æ–™çš„æ¬„ä½ï¼Œä»¥åŠä½ å¸Œæœ› API å›æ‡‰çš„æ¬„ä½ï¼š';
                    requestBodyContainer.style.display = 'block';
                    document.getElementById('dataJokeId').checked = false; // ID usually not in POST request body
                    if(method === 'PUT') document.getElementById('dataJokeId').checked = true; // ID is part of PUT response
                } else {
                    instructionEl.textContent = 'ä½ çš„ API å›æ‡‰ä¸­ï¼Œç¬‘è©±è³‡æ–™åŒ…å«å“ªäº›æ¬„ä½ï¼Ÿ';
                    requestBodyContainer.style.display = 'none';
                    document.getElementById('dataJokeId').checked = true; // ID usually in GET response
                }
            }
        }
        
        function updateMethodSpecificUI() {
            const method = document.getElementById('httpMethod').value;
            const container = document.getElementById('methodSpecificInputs');
            container.innerHTML = ''; // Clear previous inputs

            if (method === 'PUT' || method === 'DELETE') {
                const label = document.createElement('label');
                label.htmlFor = 'resourceIdInput';
                label.className = 'block mb-1 font-medium';
                label.textContent = `è¦ ${method === 'PUT' ? 'æ›´æ–°' : 'åˆªé™¤'} çš„è³‡æº ID:`;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.id = 'resourceIdInput';
                input.value = apiData.resourceId || '123'; // Default or previously stored
                input.className = 'w-full p-2 border border-gray-300 rounded-md';
                container.appendChild(label);
                container.appendChild(input);
            }
        }


        function nextStep(step) {
            // Save data from current step
            if (step === 1) apiData.purpose = document.getElementById('apiPurpose').value;
            if (step === 2) apiData.resourceName = document.getElementById('apiResourceName').value.trim() || 'jokes';
            if (step === 3) {
                apiData.method = document.getElementById('httpMethod').value;
                if (apiData.method === 'PUT' || apiData.method === 'DELETE') {
                    apiData.resourceId = document.getElementById('resourceIdInput')?.value || apiData.resourceId;
                }
            }
            if (step === 4) { // Data Structure
                apiData.dataFields = [];
                if (document.getElementById('dataJokeText').checked) apiData.dataFields.push('text');
                if (document.getElementById('dataJokeId').checked) apiData.dataFields.push('id');
                if (document.getElementById('dataJokeCategory').checked) apiData.dataFields.push('category');
                
                if (apiData.method === 'POST' || apiData.method === 'PUT') {
                    apiData.requestBody = document.getElementById('requestBody').value;
                }
            }
            
            if (step === 4) { // Before showing step 5 (Endpoint & Preview)
                generateApiPreviews();
            }

            if (currentStep < totalSteps) {
                showStep(currentStep + 1);
            }
        }

        function prevStep(step) {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }
        
        function generateApiPreviews() {
            const endpointPreviewEl = document.getElementById('apiEndpointPreview');
            const requestPreviewContainer = document.getElementById('apiRequestPreviewContainer');
            const requestPreviewEl = document.getElementById('apiRequestPreview');
            const responsePreviewEl = document.getElementById('apiResponsePreview');

            let endpoint = `https://api.example.com/${apiData.resourceName || 'jokes'}`;
            let response = {};
            let requestBodySim = null;

            // Mock data
            const mockJoke = {
                id: apiData.resourceId || "123",
                text: "ç‚ºä»€éº¼ç¨‹å¼è¨­è¨ˆå¸«å–œæ­¡æ·±è‰²æ¨¡å¼ï¼Ÿå› ç‚ºå…‰æœƒå¸å¼•èŸ²å­(bugs)ï¼",
                category: "ç¨‹å¼æ¢—"
            };
            const newMockJoke = {
                id: "456", // For POST response
                text: "æ–°ç¬‘è©±ï¼šç‚ºä»€éº¼æ¨¹æ‡¶éé¦¬è·¯é€™éº¼æ…¢ï¼Ÿå› ç‚ºç‰ æƒ³æ…¢æ…¢ä¾†ï¼",
                category: "å†·ç¬‘è©±"
            };

            switch (apiData.method) {
                case 'GET':
                    if (apiData.dataFields.includes('id')) response.id = mockJoke.id;
                    if (apiData.dataFields.includes('text')) response.text = mockJoke.text;
                    if (apiData.dataFields.includes('category')) response.category = mockJoke.category;
                    if (Object.keys(response).length === 0 && apiData.dataFields.length > 0) response.message = "æ¬„ä½å·²é¸æ“‡ï¼Œä½†æ¨¡æ“¬è³‡æ–™ä¸­ç„¡å°æ‡‰å€¼ã€‚";
                    else if (apiData.dataFields.length === 0) response.message = "è«‹è‡³å°‘åœ¨æ­¥é©Ÿ4é¸æ“‡ä¸€å€‹è³‡æ–™æ¬„ä½ï¼";
                    endpoint += `/${apiData.resourceId || mockJoke.id}`; // Typically GET specific resource
                    requestPreviewContainer.style.display = 'none';
                    break;
                case 'POST':
                    let postRequestBody = {};
                    postRequestBody.text = newMockJoke.text;
                    postRequestBody.category = newMockJoke.category;
                    
                    try { 
                        if(apiData.requestBody && apiData.requestBody.trim() !== "") {
                           const parsedUserBody = JSON.parse(apiData.requestBody);
                           if (parsedUserBody.hasOwnProperty('text')) postRequestBody.text = parsedUserBody.text;
                           if (parsedUserBody.hasOwnProperty('category')) postRequestBody.category = parsedUserBody.category;
                        }
                    } catch (e) {
                        postRequestBody.error = "æ‚¨æä¾›çš„è«‹æ±‚å…§å®¹æ ¼å¼éŒ¯èª¤ï¼Œå°‡ä½¿ç”¨é è¨­ç¯„ä¾‹ã€‚";
                    }
                    requestBodySim = postRequestBody;

                    if (apiData.dataFields.includes('id')) response.id = newMockJoke.id; 
                    if (apiData.dataFields.includes('text')) response.text = postRequestBody.text;
                    if (apiData.dataFields.includes('category')) response.category = postRequestBody.category;
                    requestPreviewContainer.style.display = 'block';
                    break;
                case 'PUT':
                    endpoint += `/${apiData.resourceId || mockJoke.id}`;
                     let putRequestBody = {};
                    putRequestBody.text = "æ›´æ–°å¾Œçš„ç¬‘è©±å…§å®¹ï¼";
                    putRequestBody.category = "æ›´æ–°å¾Œçš„åˆ†é¡";
                    
                    try { 
                         if(apiData.requestBody && apiData.requestBody.trim() !== "") {
                           const parsedUserBody = JSON.parse(apiData.requestBody);
                           if (parsedUserBody.hasOwnProperty('text')) putRequestBody.text = parsedUserBody.text;
                           if (parsedUserBody.hasOwnProperty('category')) putRequestBody.category = parsedUserBody.category;
                        }
                    } catch (e) {
                        putRequestBody.error = "æ‚¨æä¾›çš„è«‹æ±‚å…§å®¹æ ¼å¼éŒ¯èª¤ï¼Œå°‡ä½¿ç”¨é è¨­ç¯„ä¾‹ã€‚";
                    }
                    requestBodySim = putRequestBody;

                    if (apiData.dataFields.includes('id')) response.id = apiData.resourceId || mockJoke.id; 
                    if (apiData.dataFields.includes('text')) response.text = putRequestBody.text;
                    if (apiData.dataFields.includes('category')) response.category = putRequestBody.category;
                    requestPreviewContainer.style.display = 'block';
                    break;
                case 'DELETE':
                    endpoint += `/${apiData.resourceId || mockJoke.id}`;
                    response = { message: `è³‡æº ID '${apiData.resourceId || mockJoke.id}' å·²æˆåŠŸåˆªé™¤ã€‚` }; 
                    requestPreviewContainer.style.display = 'none';
                    break;
            }
            
            endpointPreviewEl.textContent = `${apiData.method} ${endpoint}`;
            if(requestBodySim && (apiData.method === 'POST' || apiData.method === 'PUT')){ 
                 requestPreviewEl.textContent = JSON.stringify(requestBodySim, null, 2);
                 apiData.simulatedRequest = requestBodySim;
            } else {
                 requestPreviewContainer.style.display = 'none';
                 apiData.simulatedRequest = null;
            }
            responsePreviewEl.textContent = JSON.stringify(response, null, 2);
            apiData.simulatedResponse = response;
            apiData.finalEndpoint = endpoint; 
        }

        function finishGame() {
            document.getElementById('summaryPurpose').textContent = apiData.purpose ? document.querySelector(`#apiPurpose option[value="${apiData.purpose}"]`).textContent : 'æœªé¸æ“‡';
            document.getElementById('summaryResourceName').textContent = apiData.resourceName || 'jokes';
            document.getElementById('finalResourceName').textContent = apiData.resourceName || 'ç¬‘è©±';
            document.getElementById('summaryMethod').textContent = apiData.method || 'GET';
            document.getElementById('summaryEndpoint').textContent = `${apiData.method} ${apiData.finalEndpoint || 'æœªç”¢ç”Ÿ'}`;
            
            const summaryRequestContainer = document.getElementById('summaryRequestContainer');
            const summaryRequestEl = document.getElementById('summaryRequest');
            if (apiData.simulatedRequest && (apiData.method === 'POST' || apiData.method === 'PUT')) {
                summaryRequestEl.textContent = JSON.stringify(apiData.simulatedRequest, null, 2);
                summaryRequestContainer.style.display = 'block';
            } else {
                summaryRequestContainer.style.display = 'none';
            }
            document.getElementById('summaryResponse').textContent = JSON.stringify(apiData.simulatedResponse || {message: "ç„¡å›æ‡‰ç¯„ä¾‹"}, null, 2);
            showStep(totalSteps); 
        }
        
        function restartGame() {
            Object.keys(apiData).forEach(key => {
                if (key !== 'resourceId') delete apiData[key];
            });
             apiData.resourceId = '123'; 

            document.getElementById('apiPurpose').value = 'entertainment';
            document.getElementById('apiResourceName').value = 'jokes';
            document.getElementById('httpMethod').value = 'GET';
            document.getElementById('dataJokeText').checked = true;
            document.getElementById('dataJokeId').checked = true;
            document.getElementById('dataJokeCategory').checked = false;
            document.getElementById('requestBody').value = '';
            updateMethodSpecificUI(); 
            showStep(1);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            openTab({currentTarget: document.querySelector('.tab-button.active')}, 'tab1');
            // Initialize API Game
            updateMethodSpecificUI(); 
            showStep(1); 
            // Initialize Quiz
            loadQuizQuestion(currentQuizQuestionIndex);
        });
    </script>
</body>
</html>
